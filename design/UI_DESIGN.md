# AutoDoor OCR 新UI界面设计方案 v2.0

## 1. 框架选择分析

### 推荐框架对比

| 框架 | 美观度 | 性能 | 跨平台 | 学习曲线 | 迁移成本 | 推荐指数 |
|------|--------|------|--------|----------|----------|----------|
| **CustomTkinter** | ★★★★☆ | ★★★☆☆ | ★★★★★ | ★★★★★ | ★★★★★ | ⭐⭐⭐⭐⭐ |
| **Flet** | ★★★★★ | ★★★★☆ | ★★★★★ | ★★★★☆ | ★★★☆☆ | ⭐⭐⭐⭐☆ |
| **PyQt6/PySide6** | ★★★★★ | ★★★★★ | ★★★★★ | ★★☆☆☆ | ★★☆☆☆ | ⭐⭐⭐☆☆ |
| **DearPyGui** | ★★★★☆ | ★★★★★ | ★★★★☆ | ★★★☆☆ | ★★★☆☆ | ⭐⭐⭐☆☆ |
| **NiceGUI** | ★★★★☆ | ★★★☆☆ | ★★★★★ | ★★★★☆ | ★★★☆☆ | ⭐⭐⭐☆☆ |

### 推荐方案：CustomTkinter

**选择理由：**
1. **最小迁移成本**：基于Tkinter，与现有代码完全兼容
2. **现代化UI**：提供圆角、深色模式、现代控件
3. **跨平台完美支持**：Windows/macOS/Linux原生支持
4. **零额外依赖**：不需要安装大型框架
5. **活跃维护**：2025年仍在积极更新

**备选方案：Flet**
- 如果追求极致美观和Web部署能力
- 需要较大代码重构

---

## 2. 设计概念与风格

### 设计风格：**现代简约 (Modern Minimal)**

基于CustomTkinter的原生现代控件，实现：
- **圆角卡片**：12px圆角，柔和阴影
- **深色/浅色主题**：一键切换
- **现代控件**：滑动开关、圆角按钮、现代输入框
- **流畅动画**：平滑的状态过渡

### 视觉特点：
- 清爽的浅色模式 / 专业的深色模式
- 统一的圆角设计语言
- 柔和的阴影层次
- 清晰的信息层级

---

## 3. 色彩方案

### 浅色主题
| 名称 | 色值 | 用途 |
|------|------|------|
| Primary | #3B82F6 | 主要按钮、链接 |
| Background | #F5F5F5 | 页面背景 |
| Surface | #FFFFFF | 卡片背景 |
| Text Primary | #1A1A1A | 主要文字 |
| Text Secondary | #6B7280 | 次要文字 |
| Border | #E5E5E5 | 边框 |
| Success | #10B981 | 成功状态 |
| Warning | #F59E0B | 警告状态 |
| Error | #EF4444 | 错误状态 |

### 深色主题
| 名称 | 色值 | 用途 |
|------|------|------|
| Primary | #3B82F6 | 主要按钮、链接 |
| Background | #1A1A1A | 页面背景 |
| Surface | #2D2D2D | 卡片背景 |
| Text Primary | #FFFFFF | 主要文字 |
| Text Secondary | #9CA3AF | 次要文字 |
| Border | #404040 | 边框 |
| Success | #10B981 | 成功状态 |
| Warning | #F59E0B | 警告状态 |
| Error | #EF4444 | 错误状态 |

---

## 4. 布局结构

### 整体布局：
```
┌────────────────────────────────────────────────────────────┐
│ 顶部导航栏 (固定)                                          │
│ [Logo] [标题] v2.0.4              [状态●] [主题] [设置] [退出] │
├────────────────────────────────────────────────────────────┤
│                                                            │
│ ┌──────────┐ ┌───────────────────────────────────────────┐│
│ │ 左侧导航  │ │ 主内容区域                                ││
│ │          │ │ ┌───────────────────────────────────────┐││
│ │ ⌂ 首页   │ │ │ 页面标题              [操作按钮]      │││
│ │ ☰ 文字识别│ │ ├───────────────────────────────────────┤││
│ │ ◷ 定时功能│ │ │                                       │││
│ │ # 数字识别│ │ │  功能卡片区域                          │││
│ │ <> 脚本   │ │ │                                       │││
│ │ ⚙ 设置   │ │ │  ┌─────────┐ ┌─────────┐ ┌─────────┐ │││
│ │          │ │ │  │ 卡片1   │ │ 卡片2   │ │ 卡片3   │ │││
│ │          │ │ │  └─────────┘ └─────────┘ └─────────┘ │││
│ └──────────┘ │ └───────────────────────────────────────┘││
│              └───────────────────────────────────────────┘│
├────────────────────────────────────────────────────────────┤
│ 底部状态栏                                                 │
│ AutoDoor OCR v2.0.4 | 仅供学习研究使用 | 制作人: Flown王砖家│
└────────────────────────────────────────────────────────────┘
```

### 布局特点：
- **左侧固定导航**：200px宽度，可折叠
- **主内容区自适应**：填充剩余空间
- **卡片式布局**：模块化功能展示
- **响应式设计**：适配不同窗口大小

---

## 5. 组件设计

### CustomTkinter 组件映射

| 原设计组件 | CustomTkinter实现 |
|------------|-------------------|
| 卡片容器 | `CTkFrame` + 圆角 |
| 主要按钮 | `CTkButton` (fg_color=primary) |
| 次要按钮 | `CTkButton` (fg_color=transparent, border) |
| 开关控件 | `CTkSwitch` |
| 下拉菜单 | `CTkOptionMenu` |
| 输入框 | `CTkEntry` |
| 复选框 | `CTkCheckBox` |
| 滑块 | `CTkSlider` |
| 标签页 | `CTkTabview` |
| 进度条 | `CTkProgressBar` |
| 滚动框 | `CTkScrollableFrame` |

### 自定义组件设计

#### 1. 现代卡片 (ModernCard)
```python
class ModernCard(ct.CTkFrame):
    - 圆角: 12px
    - 边框: 1px (可选)
    - 阴影: 通过多层Frame模拟
    - 标题栏 + 内容区
```

#### 2. 状态徽章 (StatusBadge)
```python
class StatusBadge(ct.CTkLabel):
    - 运行中: 绿色背景
    - 已暂停: 橙色背景
    - 已停止: 灰色背景
    - 错误: 红色背景
```

#### 3. 统计卡片 (StatCard)
```python
class StatCard(ModernCard):
    - 大数值显示
    - 标签说明
    - 可选趋势指示
```

#### 4. 导航项 (NavItem)
```python
class NavItem(ct.CTkFrame):
    - 图标 + 文字
    - 悬停效果
    - 选中指示条
```

---

## 6. 功能模块设计

### 首页 (Home)
```
┌─────────────────────────────────────────────────────────┐
│ 系统概览                           [▶全部启动] [⏸全部暂停]│
├─────────────────────────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐    │
│ │ 已启用   │ │ 暂停模块 │ │ 今日触发 │ │ 运行时长 │    │
│ │    4     │ │    1     │ │   12     │ │ 2h 35m   │    │
│ └──────────┘ └──────────┘ └──────────┘ └──────────┘    │
│                                                         │
│ ┌─────────────────────┐ ┌─────────────────────┐        │
│ │ 模块状态            │ │ 快速操作            │        │
│ │ ┌─────────────────┐ │ │ [选择识别区域]      │        │
│ │ │ 文字识别  ●运行 │ │ │ [添加定时任务]      │        │
│ │ │ 定时功能  ●运行 │ │ │ [新建脚本]          │        │
│ │ │ 数字识别  ○暂停 │ │ │ [导出配置]          │        │
│ │ │ 脚本运行  ●运行 │ │ │                     │        │
│ │ └─────────────────┘ │ │                     │        │
│ └─────────────────────┘ └─────────────────────┘        │
└─────────────────────────────────────────────────────────┘
```

### 文字识别 (OCR)
```
┌─────────────────────────────────────────────────────────┐
│ 文字识别                                    [+添加识别组]│
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 识别组列表                                          │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ 识别组 1                          [编辑] [删除] │ │ │
│ │ │ 区域: X:100 Y:200 W:300 H:150                   │ │ │
│ │ │ 关键词: door, men, open                         │ │ │
│ │ │ 状态: ●运行中                    [开关]         │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ 识别组 2                          [编辑] [删除] │ │ │
│ │ │ 区域: X:400 Y:300 W:200 H:100                   │ │ │
│ │ │ 关键词: start, begin                            │ │ │
│ │ │ 状态: ○已停止                    [开关]         │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 定时功能 (Timed)
```
┌─────────────────────────────────────────────────────────┐
│ 定时功能                                      [+添加任务]│
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 任务名称    │ 间隔时间   │ 按键          │ 状态     │ │
│ ├─────────────┼────────────┼───────────────┼──────────┤ │
│ │ 自动刷新    │ 每30秒     │ F5            │ ●运行中  │ │
│ │ 定时点击    │ 每1分钟    │ 点击(500,300) │ ●运行中  │ │
│ │ 自动确认    │ 每5秒      │ Enter         │ ○已暂停  │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 数字识别 (Number)
```
┌─────────────────────────────────────────────────────────┐
│ 数字识别                                  [+添加识别区域]│
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 区域 1                              当前值: 1,234   │ │
│ │ X:100 Y:200 W:80 H:30              [开关: 开]       │ │
│ ├─────────────────────────────────────────────────────┤ │
│ │ 区域 2                              当前值: 85      │ │
│ │ X:500 Y:100 W:60 H:25              [开关: 关]       │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 脚本运行 (Script)
```
┌─────────────────────────────────────────────────────────┐
│ 脚本运行                                      [+新建脚本]│
├─────────────────────────────────────────────────────────┤
│ ┌───────────────────────┐ ┌───────────────────────────┐ │
│ │ 脚本列表              │ │ 脚本编辑器                │ │
│ │ ┌───────────────────┐ │ │ # 自动任务脚本            │ │
│ │ │ <> 自动任务脚本   │ │ │ import time               │ │
│ │ │    2024-01-15 ●   │ │ │ while True:               │ │
│ │ ├───────────────────┤ │ │     click(100, 200)       │ │
│ │ │ <> 测试脚本       │ │ │     time.sleep(1)         │ │
│ │ │    2024-01-10 ○   │ │ │                           │ │
│ │ └───────────────────┘ │ │ [保存] [运行] [停止]      │ │
│ └───────────────────────┘ └───────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 基本设置 (Settings)
```
┌─────────────────────────────────────────────────────────┐
│ 基本设置                                                │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────┐ ┌─────────────────────────────┐ │
│ │ 系统设置            │ │ Tesseract设置               │ │
│ │ 深色模式    [开关]  │ │ 路径: [C:\...\tesseract.exe]│ │
│ │ 语言        [中文▼]│ │ 状态: ●已配置               │ │
│ │ 自动检查更新[开关]  │ │ 语言包: eng, chi_sim        │ │
│ └─────────────────────┘ └─────────────────────────────┘ │
│                                                         │
│ ┌─────────────────────┐ ┌─────────────────────────────┐ │
│ │ 快捷键设置          │ │ 报警设置                    │ │
│ │ 开始/停止   F9      │ │ 声音文件: [选择...]         │ │
│ │ 暂停/继续   F10     │ │ 音量: ═════════○ 70%       │ │
│ │ 选择区域    F11     │ │ [测试声音]                  │ │
│ │ 退出程序    Ctrl+Q  │ │                             │ │
│ └─────────────────────┘ └─────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

---

## 7. 交互设计

### 动画效果
- **页面切换**：淡入淡出效果
- **按钮悬停**：颜色渐变
- **开关切换**：平滑滑动
- **通知弹出**：滑入动画

### 反馈机制
- **操作成功**：绿色通知提示
- **操作失败**：红色错误提示
- **警告信息**：橙色警告提示
- **加载状态**：进度指示器

---

## 8. 技术实现

### CustomTkinter 配置
```python
import customtkinter as ctk

# 主题配置
ctk.set_appearance_mode("System")  # 跟随系统
ctk.set_default_color_theme("blue")  # 蓝色主题

# 自定义颜色主题
custom_theme = {
    "CTkButton": {
        "fg_color": "#3B82F6",
        "hover_color": "#1E40AF",
    }
}
```

### 项目结构
```
autodoor/
├── ui/
│   ├── __init__.py
│   ├── app.py              # 主应用类
│   ├── theme.py            # 主题配置
│   ├── components/         # 自定义组件
│   │   ├── card.py
│   │   ├── badge.py
│   │   ├── nav_item.py
│   │   └── ...
│   └── pages/              # 页面模块
│       ├── home.py
│       ├── ocr.py
│       ├── timed.py
│       ├── number.py
│       ├── script.py
│       └── settings.py
├── core/                   # 核心功能(保持不变)
├── modules/                # 功能模块(保持不变)
└── autodoor.py            # 入口文件
```

---

## 9. 迁移计划

### 第一阶段：基础框架 (1-2天)
1. 安装CustomTkinter依赖
2. 创建新的UI框架结构
3. 实现主题系统
4. 创建基础组件

### 第二阶段：页面迁移 (2-3天)
1. 迁移首页模块
2. 迁移文字识别模块
3. 迁移定时功能模块
4. 迁移数字识别模块
5. 迁移脚本运行模块
6. 迁移设置页面

### 第三阶段：功能对接 (1-2天)
1. 连接现有功能模块
2. 保持配置兼容
3. 测试所有功能

### 第四阶段：优化完善 (1天)
1. 性能优化
2. 细节调整
3. 文档更新

---

## 10. 依赖要求

```txt
customtkinter>=5.2.0
Pillow>=9.0.0
darkdetect>=0.8.0
```

安装命令：
```bash
pip install customtkinter Pillow darkdetect
```

---

## 11. 备选方案：Flet

如果需要更现代化的UI和Web部署能力，可以考虑Flet框架：

### Flet优势
- 基于Flutter，UI极其美观
- 支持Web、桌面、移动端
- 丰富的Material Design组件
- 热重载开发体验

### Flet劣势
- 需要较大代码重构
- 学习曲线较陡
- 打包体积较大

### Flet示例代码
```python
import flet as ft

def main(page: ft.Page):
    page.title = "AutoDoor OCR"
    page.theme_mode = ft.ThemeMode.LIGHT
    
    # 导航栏
    nav_rail = ft.NavigationRail(
        destinations=[
            ft.NavigationRailDestination(icon=ft.icons.HOME, label="首页"),
            ft.NavigationRailDestination(icon=ft.icons.TEXT_FIELDS, label="文字识别"),
            # ...
        ]
    )
    
    page.add(nav_rail)

ft.app(target=main)
```

---

## 12. 总结

**推荐方案**：使用 **CustomTkinter** 作为UI框架

**理由**：
1. 与现有Tkinter代码高度兼容，迁移成本低
2. 提供现代化的UI外观，支持深色模式
3. 跨平台支持完善（Windows/macOS/Linux）
4. 社区活跃，文档完善
5. 性能稳定，适合桌面应用

**预期效果**：
- 界面美观度提升 200%+
- 用户体验显著改善
- 保持所有现有功能
- 代码结构更清晰
